import firebase_admin
from firebase_admin import credentials, firestore
import random
import time

# Inicializar Firebase
cred = credentials.Certificate("ruta/a/tu/serviceAccountKey.json")
firebase_admin.initialize_app(cred)
db = firestore.client()

# Configuración del bot
CONFIG = {
    "multiplicador_fijo": 1.5,
    "estrategia": "fijo",  # fijo, martingala, fibonacci
    "apuesta_inicial": 10
}

# Guardar configuración en Firebase para sincronización entre dispositivos
def sync_config():
    db.collection("bot_config").document("config").set(CONFIG)

# Leer configuración desde Firebase
def load_config():
    global CONFIG
    doc = db.collection("bot_config").document("config").get()
    if doc.exists:
        CONFIG = doc.to_dict()

# Ejemplo de gestión de apuestas
class AviatorBot:
    def __init__(self):
        self.apuesta_actual = CONFIG["apuesta_inicial"]
        self.estrategia = CONFIG["estrategia"]
        self.historial = []

    def apostar(self):
        print(f"Apostando {self.apuesta_actual} con retiro en {CONFIG['multiplicador_fijo']}x")
        
        # Simulación del resultado aleatorio
        multiplicador = round(random.uniform(1, 50), 2)
        print(f"Resultado: {multiplicador}x")
        
        gano = multiplicador >= CONFIG["multiplicador_fijo"]
        self.historial.append((self.apuesta_actual, multiplicador, gano))

        if gano:
            print("✅ Ganaste!")
            self.apuesta_actual = CONFIG["apuesta_inicial"]
        else:
            print("❌ Perdiste!")
            if self.estrategia == "martingala":
                self.apuesta_actual *= 2
            elif self.estrategia == "fibonacci":
                # (Simplificación: usar secuencia fija)
                self.apuesta_actual += 10

# Ejemplo de uso
def main():
    sync_config()
    load_config()
    bot = AviatorBot()
    while True:
        bot.apostar()
        time.sleep(3)

if __name__ == "__main__":
    main()
